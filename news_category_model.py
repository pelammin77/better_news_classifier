"""
test articles
"""
article1 = """Ad sales boost Time Warner profit
Quarterly profits at US media giant TimeWarner jumped 76% to $1.13bn (?600m) for the three months to December, from $639m year-earlier.
The firm, which is now one of the biggest investors in Google, benefited from sales of high-speed internet connections and higher advert sales. TimeWarner said fourth quarter sales rose 2% to $11.1bn from $10.9bn. Its profits were buoyed by one-off gains which offset a profit dip at Warner Bros, and less users for AOL.
Time Warner said on Friday that it now owns 8% of search-engine Google. But its own internet business, AOL, had has mixed fortunes. It lost 464,000 subscribers in the fourth quarter profits were lower than in the preceding three quarters. However, the company said AOL's underlying profit before exceptional items rose 8% on the back of stronger internet advertising revenues. It hopes to increase subscribers by offering the online service free to TimeWarner internet customers and will try to sign up AOL's existing customers for high-speed broadband. TimeWarner also has to restate 2000 and 2003 results following a probe by the US Securities Exchange Commission (SEC), which is close to concluding.
Time Warner's fourth quarter profits were slightly better than analysts' expectations. But its film division saw profits slump 27% to $284m, helped by box-office flops Alexander and Catwoman, a sharp contrast to year-earlier, when the third and final film in the Lord of the Rings trilogy boosted results. For the full-year, TimeWarner posted a profit of $3.36bn, up 27% from its 2003 performance, while revenues grew 6.4% to $42.09bn. "Our financial performance was strong, meeting or exceeding all of our full-year objectives and greatly enhancing our flexibility," chairman and chief executive Richard Parsons said. For 2005, TimeWarner is projecting operating earnings growth of around 5%, and also expects higher revenue and wider profit margins.
TimeWarner is to restate its accounts as part of efforts to resolve an inquiry into AOL by US market regulators. It has already offered to pay $300m to settle charges, in a deal that is under review by the SEC. The company said it was unable to estimate the amount it needed to set aside for legal reserves, which it previously set at $500m. It intends to adjust the way it accounts for a deal with German music publisher Bertelsmann's purchase of a stake in AOL Europe, which it had reported as advertising revenue. It will now book the sale of its stake in AOL Europe as a loss on the value of that stake."""


article2 ="""
Tottenham came from behind to beat Borussia Dortmund in Germany and win Group H of the Champions League.
Dortmund needed a win to keep alive their slim hopes of progressing to the last 16 and they took the lead in the first half when Pierre-Emerick Aubameyang swept in his 16th goal of the season.
However, Spurs turned things around in the second half as Harry Kane equalised with a clinical low strike from the edge of the box soon after the restart.
Son Heung-min's curled finish wrapped up the win late on.
It was a much-needed result and performance for Tottenham after the disappointment of their north London derby defeat to Arsenal at the weekend.
And it continues an impressive campaign in Europe so far with Spurs coming out on top of a group containing Dortmund and Real Madrid with a game to spare.
They can now look forward to a potentially more favourable draw in the last 16 against a side that finishes runner up in their group.
"""

article3 = """
Theresa May has welcomed the resignation of Robert Mugabe in Zimbabwe, saying it offered an opportunity to "rebuild the country's economy".
The president stepped down after 37 years in power via a letter that was read out to the country's parliament.
It followed a takeover by the Zimbabwean military, who put Mr Mugabe under house arrest last week.
Boris Johnson called the end of Mr Mugabe's reign a "moment of hope."
    Zimbabwe's President Mugabe resigns
    Live updates from Harare
    Robert Mugabe - hero or villain?
    How Zimbabwe is celebrating
The 93-year-old had resisted calls to step down, despite the intervention of the country's military and protests across the capital of Harare.
However, on Tuesday, parliament speaker Jacob Mudenda read a letter from the former leader of Zanu-PF, which said his decision was "voluntary" and "arising from my concern for the welfare of the people of Zimbabwe."
Responding to the announcement, Mrs May said: "In recent days we have seen the desire of the Zimbabwean people for free and fair elections and the opportunity to rebuild the country's economy under a legitimate government.
"As Zimbabwe's oldest friend, we will do all we can to support this, working with our international and regional partners to help the country achieve the brighter future it so deserves."
The foreign secretary also welcomed the announcement, but warned it should not mark "the transition from one despotic rule to another".
Mr Johnson said: "I think it's very important at the moment that we don't focus too much on the personalities.
"Let's concentrate on the potential, the hope for Zimbabwe - an incredible country, a beautiful country, blessed with extraordinary physical and human potential."
Media captionForeign Secretary Boris Johnson says Robert Mugabe's resignation as president is a "moment of hope" for Zimbabwe
Asked about what he thought should happen to Mr Mugabe and his wife Grace - who the former leader had been priming as a successor - he added: "[Mr Mugabe] played an important part in the birth of the independent nation of Zimbabwe.
"And yet, tragically, he allowed that legacy to be squandered and his country went to rack and ruin and in some cases his people were driven to the brink of starvation.
"It's time now for a new future and how Robert Mugabe spends the rest of his years is very much a matter for his countrymen."
'Family dynasty' failed
Labour MP and former Africa minister, Peter Hain, said the president's attempt to ensure Grace Mugabe would follow in his footsteps was his downfall.
He told BBC News: "It was his determination to create a family dynasty and protect himself that finally meant his party gave up on him and the ruling elite gave up on him as well.
"The Zanu-PF party, that Mugabe had controlled with an iron fist, reacted against it and would not accept his wife being ushered in as his presidential replacement.
"The military said we have had enough and we are not going to put up with this, although they had ruled with him and supported him at times in murderous extermination of the opposition.
Image caption Lord Peter Hain met with Mr Mugabe when he was the minister for Africa in 1999
Lord Hain added that the people of Zimbabwe had the chance for a "fresh start", and called on former vice president Emmerson Mnangagwa, who is expected to will be sworn in as president in the coming days, to take the country "in a different direction".
Salil Shetty, secretary general of London-based Amnesty International, said Mr Mugabe's leadership had allowed "grotesque crimes to thrive", but his resignation was a turning point.
She said: "After more than three decades of violent repression, the way forward for the country is to renounce the abuses of the past and transition into a new era where the rule of law is respected and those who are responsible for injustices are held to account."
"""

article4 ="""
Ed Sheeran, Stormzy and Rag N Bone Man have all received multiple nominations for this year's BBC Music Awards.
All three are up for artist of the year and album of the year, alongside the likes of Dua Lipa and Harry Styles.
Unlike previous years, there will be no awards ceremony. Instead prizes will be handed out during a BBC Two programme reviewing the best music of the year.
Strictly Come Dancing's Claudia Winkleman will host the show alongside Radio 1's Clara Amfo on 8 December.
Called The Year In Music 2017, the show will "revisit the music stories of the year, told by the musicians at the heart of them," said BBC Music editor James Stirling.
The show will almost certainly reflect the powerful and poignant One Love Manchester concert, held in the aftermath of the terrorist bombing at Ariana Grande's show at the Manchester Arena on 22 May, amongst the other, more celebratory, events of 2017.
"""


article5 ="""
Hundreds of web firms are tracking every single keystroke made by visitors, a study from Princeton University has suggested.
The technique - known as session replay - is used by companies to gain an understanding of how customers use websites.
More than 480 websites used the technique, according to the study.
Experts questioned the legality of using such software without user consent.
"These scripts record your keystrokes, mouse movements, and scrolling behaviour, along with the entire contents of the pages you visit, and send them to third-party servers," the researchers said in a blog.
"Collection of page content by third-party replay scripts may cause sensitive information such as medical conditions, credit card details and other personal information displayed on a page to leak to the third party as part of the recording. This may expose users to identity theft, online scams, and other unwanted behaviour," they added.
The researchers looked at seven firms that offer session replay software - FullStory, SessionCam, Clicktale, Smartlook, UserReplay, Hotjar and Yandex.
They found that 482 of the world's top 50,000 sites used scripts provided by one of these firms.
Firms using the software included the UK's news website the Telegraph, Samsung, Reuters, US retail giant Home Depot and CBS News.
Paul Edon, director at security firm Tripwire said: "The first area of concerns here is the legality of recording people's keystrokes without first informing them of the fact.
"If these websites do not alert the user to the fact that they are recording keystrokes, then I would class this under 'nefarious activity' as it is being less than honest, and the information is being collected without the user's knowledge."
"""

article6 = """
Missed the eclipse? America's next one is in 2024
Ashley Strickland-Profile-Image
By Ashley Strickland, CNN
Updated 1638 GMT (0038 HKT) August 22, 2017
A total solar eclipse is seen on Monday, August 21, 2017 above Madras, Oregon. A total solar eclipse swept across a narrow portion of the contiguous United States from Lincoln Beach, Oregon to Charleston, South Carolina. A partial solar eclipse was visible across the entire North American continent along with parts of South America, Africa, and Europe.
The next total solar eclipse visible in the US will occur in 2024
So you missed it. Maybe you're stuck in the office, traveling, at an ill-timed appointment, the victim of bad weather, unable to procure eclipse glasses, driving or simply in the wrong place at the wrong time. It happens.
If you weren't able to see one of the most anticipated and unifying events this country has witnessed in nearly a hundred years, don't worry. You won't have to wait an entire century until the next one -- just seven years. Another total solar eclipse will be visible in the United States on April 8, 2024.
"""


article7 = """
Charlie Austin scored his third goal in three games as Southampton salvaged a point from their south-coast derby at Bournemouth.

Austin, who scored twice against Everton last month, swept home the equaliser just after the hour mark.

The Cherries had taken the lead just before the break, when Scotland winger Ryan Fraser slotted a first-time effort past Fraser Forster.

They had already had a penalty appeal turned down, with Adam Smith judged to have dived as Sofiane Boufal attempted to tackle him. Smith later told the media that referee Jon Moss apologised after the game and said it should have been a penalty.

Saints improved markedly in the second half after manager Mauricio Pellegrino replaced James Ward-Prowse with Nathan Redmond.

The England Under-21 winger - whose post-match conversation with Manchester City boss Pep Guardiola in midweek prompted much discussion - provided the pass for Austin to score.

The point takes Southampton up to 11th in the Premier League, while Bournemouth move above Newcastle into 14th.
Saints discover bite after Redmond introduction

Pellegrino must have had a good reason to leave one of his most influential forwards out of the starting XI.

Bar a couple of half-chances for Austin in the first half, the home defence coped comfortably with what threat the Saints offered.

That changed after the break when Redmond replaced Ward-Prowse. Given a roving role behind Austin, he provided the thrust the visitors had been lacking.

The key moment came in the 61st minute when he played a simple pass to Austin, who swept in past Asmir Begovic.

Redmond also went close with a drive from 20 yards during a second half Southampton largely dominated.
Does Forster deserve to go to Russia?

Had it not been for Forster's brilliant first-half save it could have been a different outcome for Southampton.

The 29-year-old has been criticised for some of his displays this season and did not feature in the last England squad.

His excellent one-handed save to deny Jermain Defoe was as good as any of David de Gea's wonderful stops for Manchester United at Arsenal on Saturday. He then produced another good block to keep out Joshua King's stinging effort after the break.

The former Celtic man has made more saves in the Premier League than any other English keeper this season - 15 - and aside from Burnley's Nick Pope he has the best save percentage of any of his rivals in the England squad.

But will he be on the plane to Russia?
"""


"""
file: news_category_model.py 
author Petri Lamminaho 

Test 'main module' loads vectors and model from pkl file 
and test the model with 6 real news article  
"""

import pickle
from textblob import Word
from clean_data import clean_data

def check_news_type(news_article):
    news_article = [' '.join([Word(word).lemmatize() for word in clean_data(news_article).split()])]
    features = vect.transform(news_article)
    return str(model.predict(features)[0])

with open('pkl/news_classifier.pkl', 'rb') as f:
    model = pickle.load(f)

with open("pkl/vect.pkl", 'rb') as f:
    vect = pickle.load(f)

##test
print(check_news_type(article1))# should return business # OK
print(check_news_type(article2)) # should return sport # OK
print( check_news_type(article3)) # should return politics # OK
print(check_news_type(article4)) # # should return entertaiment # OK
print(check_news_type(article5)) # should return tech # OK
print(check_news_type(article6)) # should return science # OK
print(check_news_type(article7)) # sport
